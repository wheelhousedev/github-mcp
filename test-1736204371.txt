
> github-manager@0.1.0 test
> vitest run


 RUN  v2.1.8 /Users/dustmoo/Documents/Cline/MCP/github-manager

 ❯ build/test/unit/services/organizations/ListOrgsService.test.js (4 tests | 1 failed) 7ms
   × ListOrgsService > execute > should handle rate limit errors 3ms
     → expected "spy" to be called at least once
 ❯ build/test/integration/GitHubManager.test.js (0 test)
 ❯ build/test/unit/GitHubManager.test.js (0 test)
 ❯ test/unit/services/organizations/ListOrgsService.test.ts (4 tests | 2 failed) 9ms
   × ListOrgsService > execute > should handle rate limit errors 4ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(8 matching properties omitted from actual)
   × ListOrgsService > execute > should handle network errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
 ❯ test/unit/services/repositories/ListReposService.test.ts (5 tests | 5 failed) 10ms
   × ListReposService > execute > should list repositories successfully 5ms
     → expected "spy" to be called with arguments: [ [ 'read:org', 'repo' ] ]

Received: 

  1st spy call:

  Array [
    Array [
-     "read:org",
      "repo",
    ],
  ]


Number of calls: 1

   × ListReposService > execute > should handle missing organization parameter 2ms
     → expected Error: MCP error -32602: Organization nam… { …(2) } to match object { code: -32603, …(2) }
(2 matching properties omitted from actual)
   × ListReposService > execute > should handle authentication errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(2 matching properties omitted from actual)
   × ListReposService > execute > should handle rate limit errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(2 matching properties omitted from actual)
   × ListReposService > execute > should handle network errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(2 matching properties omitted from actual)
 ❯ test/unit/services/repositories/CreateRepoService.test.ts (7 tests | 6 failed) 13ms
   × CreateRepoService > execute > should create a public repository successfully 5ms
     → expected { name: 'new-repo', …(7) } to deeply equal { name: 'new-repo', …(4) }
   × CreateRepoService > execute > should create a private repository successfully 1ms
     → expected { name: 'new-repo', …(7) } to deeply equal { name: 'new-repo', …(4) }
   × CreateRepoService > execute > should handle missing required parameters 3ms
     → expected Error: MCP error -32602: Organization and… { …(2) } to match object { code: -32603, …(2) }
(2 matching properties omitted from actual)
   × CreateRepoService > execute > should handle authentication errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
   × CreateRepoService > execute > should handle rate limit errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
   × CreateRepoService > execute > should handle network errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
 ❯ test/unit/services/repositories/UpdateRepoSettingsService.test.ts (7 tests | 6 failed) 13ms
   × UpdateRepoSettingsService > execute > should update repository settings successfully 6ms
     → expected { name: 'test-repo', …(1) } to deeply equal { name: 'test-repo', …(1) }
   × UpdateRepoSettingsService > execute > should handle partial settings updates 1ms
     → expected { name: 'test-repo', …(1) } to deeply equal { name: 'test-repo', …(1) }
   × UpdateRepoSettingsService > execute > should handle missing required parameters 2ms
     → expected Error: MCP error -32603: Organization, re… { …(2) } to match object { code: -32603, …(2) }
(2 matching properties omitted from actual)
   × UpdateRepoSettingsService > execute > should handle authentication errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
   × UpdateRepoSettingsService > execute > should handle rate limit errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
   × UpdateRepoSettingsService > execute > should handle network errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
 ❯ test/unit/services/collaborators/AddCollaboratorService.test.ts (8 tests | 6 failed) 12ms
   × AddCollaboratorService > execute > should add collaborator successfully 5ms
     → expected { status: 'active', …(2) } to deeply equal { status: 'active', …(1) }
   × AddCollaboratorService > execute > should handle missing required parameters 2ms
     → promise resolved "{ status: 'active', …(2) }" instead of rejecting
   × AddCollaboratorService > execute > should handle invalid permission level 0ms
     → promise resolved "{ status: 'active', …(2) }" instead of rejecting
   × AddCollaboratorService > execute > should handle authentication errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
   × AddCollaboratorService > execute > should handle rate limit errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)
   × AddCollaboratorService > execute > should handle network errors 1ms
     → expected Error: Bad credentials { …(2) } to match object { code: -32603, …(2) }
(5 matching properties omitted from actual)

 Test Files  8 failed (8)
      Tests  26 failed | 9 passed (35)
   Start at  14:59:33
   Duration  473ms (transform 859ms, setup 0ms, collect 928ms, tests 64ms, environment 1ms, prepare 960ms)

